
<div class="table-container table-responsive">
    <table class="table table-striped table-bordered table-sm">
        <thead class="thead-dark">
            <tr>
                <th>S. No.</th>
                <th>State</th><th>Months</th><th>Year</th><th>Component Name</th><th>RUSA Phase</th><th>Institution Name</th><th>AISHE Code</th><th>District</th><th>PAB Meeting No.</th><th>PAB Date</th><th>Central Share Approved</th><th>Central Share Released</th><th>Central Share Utilised</th><th>State Share Approved</th><th>State Share Released</th><th>State Share Utilised</th><th>Total Amount Approved</th><th>Total Amount Released</th><th>Total Amount Utilised</th><th>Activities Undertaken (Current Month)</th><th>Activities Undertaken (Prev. Month)</th><th>Activities Yet to be Undertaken</th><th>Physical Progress (%)</th><th>PM Launched</th><th>Project Inauguration Status</th><th>If Inaugurated, By Whom/When</th><th>Tentative Completion Date</th><th>Project Status</th><th>If Completed, Is Project Functional</th><th>Reason If Not Functional</th><th>Benefits From Project</th><th>Students Benefitted</th><th>Faculties Benefitted</th><th>Research Works Undertaken</th><th>Physical Inspection Reports (PIR)</th><th>PIR Uploaded</th>
            </tr>
        </thead>
        <tbody>
            {% for record in pagination.items %}
            <tr>
                <td>{{ (pagination.page - 1) * pagination.per_page + loop.index }}</td>
                <td>{{ record.state or 'N/A' }}</td>
                <td>{{ record.months or 'N/A' }}</td>
                <td>{{ record.year|int if record.year is not none else 'N/A' }}</td>
                <td>{{ record.component_name or 'N/A' }}</td>
                <td>{{ record.rusa_phase or 'N/A' }}</td>
                <td>{{ record.institution_name or 'N/A' }}</td>
                <td>{{ record.aishe_code or 'N/A' }}</td>
                <td>{{ record.district or 'N/A' }}</td>
                <td>{{ record.pab_meeting_number or 'N/A' }}</td>
                <td>{{ record.pab_date.strftime('%Y-%m-%d') if record.pab_date else 'N/A' }}</td>
                <td>{{ "%.2f"|format(record.central_share_approved) if record.central_share_approved is not none else 'N/A' }}</td>
                <td>{{ "%.2f"|format(record.central_share_released) if record.central_share_released is not none else 'N/A' }}</td>
                <td>{{ "%.2f"|format(record.central_share_utilised) if record.central_share_utilised is not none else 'N/A' }}</td>
                <td>{{ record.state_share_approved if record.state_share_approved is not none else 'N/A' }}</td>
                <td>{{ "%.2f"|format(record.state_share_released) if record.state_share_released is not none else 'N/A' }}</td>
                <td>{{ "%.2f"|format(record.state_share_utilised) if record.state_share_utilised is not none else 'N/A' }}</td>
                <td>{{ "%.2f"|format(record.total_amount_approved) if record.total_amount_approved is not none else 'N/A' }}</td>
                <td>{{ "%.2f"|format(record.total_amount_released) if record.total_amount_released is not none else 'N/A' }}</td>
                <td>{{ "%.2f"|format(record.total_amount_utilised) if record.total_amount_utilised is not none else 'N/A' }}</td>
                <td>{{ record.activities_that_have_been_already_undertaken_in_current_month or 'N/A' }}</td>
                <td>{{ record.activities_that_have_been_undertaken_till_previous_month or 'N/A' }}</td>
                <td>{{ record.activities_yet_to_be_undertaken or 'N/A' }}</td>
                <td>{{ record.percentage_physical_progress_total if record.percentage_physical_progress_total is not none else 'N/A' }}</td>
                <td>{{ record.whether_pm_digitally_launched_project_yes_no_ or 'N/A' }}</td>
                <td>{{ record.project_inauguration_status_inaugurated_not_inaugurated_ or 'N/A' }}</td>
                <td>{{ record.if_inaugurated_then_by_whom_and_when or 'N/A' }}</td>
                <td>{{ record.tentative_date_of_completion.strftime('%Y-%m-%d') if record.tentative_date_of_completion else 'N/A' }}</td>
                <td>{{ record.project_status or 'N/A' }}</td>
                <td>{{ record.if_project_is_completed_whether_the_project_is_functional_or_lying_idle_not_functional_ or 'N/A' }}</td>
                <td>{{ record.if_the_project_is_completed_but_not_functional_please_state_the_reason_s_ or 'N/A' }}</td>
                <td>{{ record.benfits_from_the_projects_please_provide_details_ or 'N/A' }}</td>
                <td>{{ record.number_of_students_benefitted|int if record.number_of_students_benefitted is not none else 'N/A' }}</td>
                <td>{{ record.number_of_faculties_benefitted|int if record.number_of_faculties_benefitted is not none else 'N/A' }}</td>
                <td>{{ record.number_of_research_works_being_undertaken|int if record.number_of_research_works_being_undertaken is not none else 'N/A' }}</td>
                <td>{{ record.physical_inspection_reports_pir_ or 'N/A' }}</td>
                <td>{{ record.pir_uploaded_yes_no_not_selected_ or 'N/A' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="pagination-container">
    <nav aria-label="Page navigation">
       <ul class="pagination justify-content-center mb-1">
            {% if pagination.has_prev %}<li class="page-item"><a class="page-link" href="{{ url_for('mpr.records', page=pagination.prev_num, **request.args) }}">Previous</a></li>{% else %}<li class="page-item disabled"><span class="page-link">Previous</span></li>{% endif %}
            {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
                {% if page_num %}
                    {% if pagination.page == page_num %}<li class="page-item active"><span class="page-link">{{ page_num }}</span></li>{% else %}<li class="page-item"><a class="page-link" href="{{ url_for('mpr.records', page=page_num, **request.args) }}">{{ page_num }}</a></li>{% endif %}
                {% else %}<li class="page-item disabled"><span class="page-link">...</span></li>{% endif %}
            {% endfor %}
            {% if pagination.has_next %}<li class="page-item"><a class="page-link" href="{{ url_for('mpr.records', page=pagination.next_num, **request.args) }}">Next</a></li>{% else %}<li class="page-item disabled"><span class="page-link">Next</span></li>{% endif %}
        </ul>
    </nav>
     <p class="text-center small">Showing page {{ pagination.page }} of {{ pagination.pages }}. Total records: {{ pagination.total }}</p>
</div>
